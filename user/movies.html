<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="/css/user_home.css">
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container d-flex justify-content-between">
            <a class="logo-name navbar-brand text-white fw-bold" href="#">Book Show</a>

            <form class="d-flex  position-relative" style="width: 40%;">
                <input class="form-control ps-5" type="search" placeholder="Search for Movies, Cinemas and others..." />
                <i class="bi bi-search position-absolute top-50 start-0 translate-middle-y ms-3 text-muted"
                    style="cursor: pointer;"></i>
            </form>

            <div class="d-flex align-items-center">
                <span class="text-white me-2">Harsh Rajpara</span>
                <a href="#"><i class="bi bi-person-circle me-3 fs-3 text-dark"></i></a>
                <button class="btn btn-dark btn-md rounded-3">Sign Up</button>
            </div>
        </div>
    </nav>

    <!-- Secondary Nav -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark py-1">
        <div class="container d-flex justify-content-between align-items-center">
            <div class="navbar-nav">
                <a class="nav-link" href="./user_home.html" id="homeNav">Home</a>
                <a class="nav-link active" href="./movies.html" id="moviesNav">Movies</a>
                <a class="nav-link" href="./cinemas.html" id="cinemasNav">Cinemas</a>
                <a class="nav-link" href="#">Plays</a>
                <a class="nav-link" href="#">Sports</a>
                <a class="nav-link" href="#">Events</a>
                <a class="nav-link" href="#">Contact Us</a>
            </div>
            <div>
                <a href="#"><i class="bi bi-facebook text-light me-3"></i></a>
                <a href="#"><i class="bi bi-instagram text-light me-3"></i></a>
                <a href="#"><i class="bi bi-twitter-x text-light me-3"></i></i></a>
                <a href="#"><i class="bi bi-youtube text-light me-3"></i></a>
                <a href="#"><i class="bi bi-linkedin text-light"></i></a>
            </div>
        </div>
    </nav>

    <!-- MOVIES PAGE CONTENT -->
    <div id="moviesPage" class="container my-4">
        <div class="row">
            <div class="col-md-3">
                <div class="filter-box">
                    <div class="filter-section">
                        <h5 class="fw-semibold mb-3">Filters</h5>
                        <!-- Languages -->
                        <div class="filter-group mb-3">
                            <div class="filter-header">
                                <h6>Languages</h6>
                                <a class="clear-btn" data-group="lang">Clear</a>
                            </div>
                            <div class="filter-buttons" data-group="lang">
                                <button class="filter-btn active">Hindi</button>
                                <button class="filter-btn">Gujarati</button>
                                <button class="filter-btn">Telugu</button>
                                <button class="filter-btn">Assamese</button>
                                <button class="filter-btn">Japanese</button>
                                <button class="filter-btn">Malayalam</button>
                            </div>
                        </div>

                        <div class="filter-divider"></div>

                        <!-- Genres -->
                        <div class="filter-group mb-3">
                            <div class="filter-header">
                                <h6>Genres</h6>
                                <a class="clear-btn" data-group="genre">Clear</a>
                            </div>
                            <div class="filter-buttons" data-group="genre">
                                <button class="filter-btn">Drama</button>
                                <button class="filter-btn active">Comedy</button>
                                <button class="filter-btn">Romantic</button>
                                <button class="filter-btn">Action</button>
                                <button class="filter-btn">Thriller</button>
                                <button class="filter-btn">Adventure</button>
                                <button class="filter-btn">Crime</button>
                                <button class="filter-btn">Anime</button>
                                <button class="filter-btn">Fantasy</button>
                                <button class="filter-btn">Horror</button>
                                <button class="filter-btn">Musical</button>
                                <button class="filter-btn">Family</button>
                                <button class="filter-btn">Supernatural</button>
                            </div>
                        </div>

                        <div class="filter-divider"></div>

                        <!-- Format -->
                        <div class="filter-group">
                            <div class="filter-header">
                                <h6>Format</h6>
                                <a class="clear-btn" data-group="format">Clear</a>
                            </div>
                            <div class="filter-buttons" data-group="format">
                                <button class="filter-btn">2D</button>
                                <button class="filter-btn">4DX</button>
                                <button class="filter-btn">IMAX 2D</button>
                                <button class="filter-btn">3D</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="col-md-9">
                <h5 class="fw-semibold mb-3">You might also like more.</h5>
                <div class="card movie-card" style="width: 180px">
                    <img src="/assets/The_Kerala_Story_poster.jpg" class="card-img-top" alt="The Kerala Story" />
                    <div class="card-body text-center">
                        <p class="mb-0 fw-semibold">The Kerala Story</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MOVIE DETAIL PAGE -->
    <div id="movieDetailPage" class="section container mt-5" style="display: none;">
        <div class="row align-items-start">
            <div class="col-md-3">
                <img src="https://i.ibb.co/jGH1TPZ/kerala.jpg" class="img-fluid rounded shadow"
                    alt="The Kerala Story" />
            </div>
            <div class="col-md-9">
                <h3 class="fw-bold">The Kerla <span class="text-warning">Story</span></h3>
                <p class="text-muted mb-1">Action ‚Ä¢ Crime ‚Ä¢ Adventure</p>
                <p>
                    <span class="badge bg-light text-dark border">2D</span>
                    <span class="badge bg-light text-dark border">3D</span>
                    <span class="badge bg-light text-dark border">ICE 3D</span>
                    <span class="badge bg-light text-dark border">4DX 2D</span>
                </p>
                <p class="text-muted">
                    Hindi, Gujarati, Malayalam, Marathi, Telugu, Kannada, Punjabi
                </p>
                <p class="text-muted">‚è± 2h 30m | üìÖ 1 Jan, 2024</p>
                <button id="bookTicketsBtn" class="btn btn-primary">Book Tickets</button>

                <div class="mt-5">
                    <h5 class="fw-semibold">About The Kerala Story:</h5>
                    <p class="text-muted">
                        Who are coerced into converting to Islam, and go on to join the Islamic State of Iraq and Syria
                        (ISIS).
                    </p>
                </div>
            </div>
        </div>

        <hr class="my-5" />
        <div class="row">
            <div class="col-md-3">
                <h6 class="fw-bold">Movie filter</h6>
                <div class="p-4 bg-light rounded shadow-sm" style="height:200px;"></div>
            </div>
            <div class="col-md-9">
                <h6 class="fw-bold">You might also like more.</h6>
                <div class="row g-3 mt-2">
                    <div class="col-md-3">
                        <div class="card">
                            <img src="https://i.ibb.co/jGH1TPZ/kerala.jpg" class="card-img-top" />
                            <div class="card-body text-center">
                                <p class="mb-0 fw-semibold">The Kerala Story</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BOOKING PAGE -->


    <div id="bookingPage" class="section container mt-5" style="display:none;">
        <h2>The Kerala Story</h2>
        <p><strong>Date:</strong> 05 Jun, 2023</p>

        <div class="theatre">
            <h5>INOX Raj Imperial</h5>
            <p>üì± Mobile Ticket | üçî Food & Beverage</p>
            <div class="showtimes">
                <button class="btn btn-outline-success">12:15</button>
                <button class="btn btn-outline-success">20:09</button>
                <button class="btn btn-outline-success">14:33</button>
            </div>
        </div>
        <hr>
        <div class="theatre">
            <h5>Roongta</h5>
            <p>üì± Mobile Ticket | üçî Food & Beverage</p>
            <div class="showtimes">
                <button class="btn btn-outline-success">04:53</button>
            </div>
        </div>
    </div>

    <!-- Seat Selection Page -->
    <div id="seatPage" class="section container mt-5" style="display:none;">
        <h2 class="text-center mb-4">The Kerala <span class="text-warning">Story</span></h2>
        <p class="text-center">
            The show at <span id="selectedTheatre" class="fw-bold"></span> on
            <span id="selectedTime" class="text-success"></span> O'Clock
        </p>

        <p><strong>‚Çπ100 / seat</strong></p>

        <div class="d-flex flex-wrap justify-content-center gap-2 mb-5" id="seatContainer"></div>

        <!-- Pay button (fixed at bottom) -->
        <div class="text-center mt-4 mb-5">
            <button id="payButton" class="btn btn-dark px-5 py-2 rounded-pill">
                Pay ‚Çπ0
            </button>
        </div>
    </div>

    <!-- Payment Success Page -->
    <div id="paymentSuccess" class="text-center mt-5" style="display: none;">
        <h2 class="mb-4 text-secondary">The Kerla <span class="text-warning">Story</span></h2>
        <p class="text-end me-5 text-muted">
            The show at <span id="paymentTheatre" class="fw-bold"></span> on
            <span id="paymentTime" class="text-success"></span> O'Clock
        </p>

        <div class="d-flex justify-content-center align-items-center" style="height: 60vh;">
            <div>
                <div class="checkmark" style="font-size: 70px; color: #27ae60;">&#10004;</div>
                <h5 class="mt-3 text-success">Your Payment Successfully completed.</h5>
                <h4 class="fw-bold text-success">Thank You!!!!!</h4>
            </div>
        </div>
    </div>

    <script>
        const homeNav = document.getElementById("homeNav");
        const moviesNav = document.getElementById("moviesNav");
        const cinemasNav = document.getElementById("cinemasNav");

        const homePage = document.getElementById("homePage");
        const moviesPage = document.getElementById("moviesPage");
        const movieDetailPage = document.getElementById("movieDetailPage");
        const cinemasPage = document.getElementById("cinemasPage");
        const cinemaDetailPage = document.getElementById("cinemaDetailPage");
        const bookingPage = document.getElementById("bookingPage");

        const bookTicketsBtn = document.getElementById("bookTicketsBtn");

        const seatPage = document.getElementById("seatPage");
        const seatContainer = document.getElementById("seatContainer");
        const selectedTheatre = document.getElementById("selectedTheatre");
        const selectedTime = document.getElementById("selectedTime");
        const payButton = document.getElementById("payButton");

        const seatPrice = 100;
        let selectedSeats = [];


        function hideAll() {
            [homePage, moviesPage, movieDetailPage, cinemasPage, cinemaDetailPage, bookingPage, seatPage].forEach(page => page.style.display = "none");
            document.querySelectorAll(".nav-link").forEach(link => link.classList.remove("active"));
        }

        // Default: show home
        hideAll();
        moviesPage.style.display = "block";
        moviesNav.classList.add("active");

        // Navbar navigation
        homeNav.addEventListener("click", () => {
            hideAll();
            homePage.style.display = "block";
            homeNav.classList.add("active");
        });

        moviesNav.addEventListener("click", () => {
            hideAll();
            moviesPage.style.display = "block";
            moviesNav.classList.add("active");
        });

        cinemasNav.addEventListener("click", () => {
            hideAll();
            cinemasPage.style.display = "block";
            cinemasNav.classList.add("active");
        });

        // Movie card click ‚Üí toggle movie detail
        document.querySelectorAll(".movie-card").forEach(card => {
            card.addEventListener("click", () => {
                if (movieDetailPage.style.display === "block") {
                    // If already open ‚Üí close and go back to movies page
                    hideAll();
                    moviesPage.style.display = "block";
                    moviesNav.classList.add("active");
                } else {
                    hideAll();
                    movieDetailPage.style.display = "block";
                }
            });
        });

        // Cinema card click ‚Üí toggle cinema detail
        document.querySelectorAll(".cinema-card").forEach(card => {
            card.addEventListener("click", () => {
                if (cinemaDetailPage.style.display === "block") {
                    hideAll();
                    cinemasPage.style.display = "block";
                    cinemasNav.classList.add("active");
                } else {
                    hideAll();
                    cinemaDetailPage.style.display = "block";
                }
            });
        });

        bookTicketsBtn.addEventListener("click", () => {
            if (bookingPage.style.display === "block") {
                // If already open ‚Üí go back to movie detail
                hideAll();
                movieDetailPage.style.display = "block";
            } else {
                // Show booking page
                hideAll();
                bookingPage.style.display = "block";
            }
        });

        // Function to open seat selection
        function openSeatSelection(theatreName, time) {
            hideAll();
            seatPage.style.display = "block";
            selectedTheatre.textContent = theatreName;
            selectedTime.textContent = time;
            selectedSeats = [];
            updatePayButton();

            // Generate seats dynamically
            seatContainer.innerHTML = "";
            for (let i = 1; i <= 50; i++) {
                const seat = document.createElement("button");
                seat.textContent = i;
                seat.className = "btn btn-outline-success seat m-1";
                seat.addEventListener("click", () => toggleSeat(seat, i));
                seatContainer.appendChild(seat);
            }
        }

        // Toggle seat selection
        function toggleSeat(seat, seatNumber) {
            seat.classList.toggle("btn-success");
            seat.classList.toggle("btn-outline-success");

            if (selectedSeats.includes(seatNumber)) {
                selectedSeats = selectedSeats.filter((n) => n !== seatNumber);
            } else {
                selectedSeats.push(seatNumber);
            }

            updatePayButton();
        }

        // Update pay button text
        function updatePayButton() {
            const total = selectedSeats.length * seatPrice;
            payButton.textContent = `Pay ‚Çπ${total}`;
        }

        // Pay button click event
        payButton.addEventListener("click", () => {
            if (selectedSeats.length === 0) {
                alert("Please select at least one seat before proceeding.");
            } else {
                alert(`You selected ${selectedSeats.length} seats.\nTotal: ‚Çπ${selectedSeats.length * seatPrice}`);
            }
        });

        // Attach events to showtime buttons after DOM loaded
        document.addEventListener("DOMContentLoaded", () => {
            const showButtons = document.querySelectorAll(".showtimes button");
            showButtons.forEach((btn) => {
                btn.addEventListener("click", (e) => {
                    const theatre = e.target.closest(".theatre").querySelector("h5").textContent;
                    const time = e.target.textContent;
                    openSeatSelection(theatre, time);
                });
            });
        });

        payButton.addEventListener("click", () => {
            if (selectedSeats.length === 0) {
                alert("Please select at least one seat before proceeding.");
            } else {
                // Hide seat selection and show success page
                seatPage.style.display = "none";
                document.getElementById("paymentSuccess").style.display = "block";

                // Pass theatre and time info to success screen
                document.getElementById("paymentTheatre").textContent = selectedTheatre.textContent;
                document.getElementById("paymentTime").textContent = selectedTime.textContent;

                // Optional: reset seats after payment
                selectedSeats = [];
                updatePayButton();
            }
        });

        // Clear button logic
        document.querySelectorAll('.clear-btn').forEach(clearBtn => {
            clearBtn.addEventListener('click', () => {
                const group = clearBtn.dataset.group;
                document.querySelectorAll(`.filter-buttons[data-group="${group}"] .filter-btn`)
                    .forEach(btn => btn.classList.remove('active'));
            });
        });

    </script>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
</body>

</html>